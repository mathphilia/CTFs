# neoannophobia
category: Misc
100 points, 129 solves

## 問題
> Can you beat my game?  
>   
> `nc neoannophobia.chal.imaginaryctf.org 1337`

## 解法
サーバ側とあるゲームをして、100連勝するとflagがもらえる。ゲームの内容は以下の通り。  
- サーバが先手、こちらが後手となり、交互に日付を言う(例: June 28)。
- 先手の1手目は任意の日付を言えるが、それ以降は直前に相手が言った日付とmonthかdayが同じで、かつ相手が言ったものより後の日付を言わなければならない。例えば"June 28"と言われた後の手で、
  - June 30 → 同じ月(June)で後の日付なのでOK
  - November 28 → 同じ日(28)で後の日付なのでOK
  - November 30 → 月も日も異なるのでNG
  - February 28 → June 28より後の日付でないのでNG(8ヶ月後だからセーフなどという屁理屈は通用しない)
  - June 31 → 存在しない日付なのでNG(なぜかサーバは普通にNovember 31とか言ってくる。また、Febuary 2も無効らしい)
- December 31を言った側が勝利となり、この時点でゲームが終了する。

何を言ったら勝てるかを考えてみよう。November 30と言うと、相手はNovember 31かDecember 30しか言えず、どちらの場合でも次のターンでDecember 31を言うことができる。では、どうしたらNovember 30を言うことができるだろうか。October 29と言った後の相手の手は(i) October 30かNovember 29, (ii) October 31かDecember 29のいずれかになる。(i)の場合こちらはNovember 30を言うことができ、(ii)の場合こちらはDecember 31を言うことができる。したがってOctober 29と言うことができれば確実に勝つことができる。この考え方を繰り返すことにより、December 31, November 30, October 29, September 28, August 27, July 26, June 25, May 24, April 23, March 22, February 21, January 20と言うことができれば確実に勝てると分かる。また、相手がこれらのいずれでもない日付を言った場合、必ずこれらのいずれかの日付を返すことができる。もし相手が上記のいずれかの日付を言った場合は、できるだけゲームを長引かせるために1ヶ月後か1日後の日付を答えるのが最適戦略となる。相手が最適戦略をとった場合勝つことはできないが、さすがに不可能な状況は作られないと思われる。  
以上をまとめると、相手が$m$月$d$日を言った時の最適戦略は  
1. $d-m<19$のとき、$m$月$m+19$日を答える。
1. $d-m=19$のとき、$m+1$月$d$日を答える。
1. $d-m>19$のとき、$d-19$月$d$日を答える。

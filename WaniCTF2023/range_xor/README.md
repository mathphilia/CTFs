# range\_xor
category: Misc  
274 points, 40 solves

## 問題
> 整数列Aの任意の要素a\_i(0<=a\_i<=1000,i=1,2...N)に対して操作fを次のように定める
> `f(a_i)=min(a_i, 1000-a_i)`
> 操作fを好きな回数行った後の整数列B={b\_1,b\_2...b\_N}に対して
> `X = b_1 xor b_2 xor ... xor b_N`
> とするとき、Xを最小にするような整数列Bの種類数を10^9+7で割った余りをFLAGとする。
> 
> **Test Case**
> N=3, A={10, 20, 55}の時、X=41が最小値となり、そのようなXを作るBはB={10, 20, 55}の1種類である。
> よってFLAG{1}
> N=10, A={532, 746, 606, 601, 293, 825, 912, 826, 789, 190}の時、X=32が最小値となり、そのようなXを作るBは2種類である。
> よってFLAG{2}
(a\_iは`case(N=1000).txt`に入っている)

## 解法
~~ややこしいファイル名をつけないでほしい~~競技プログラミング的な問題。$2^{1000}$パターン全てをチェックすればよいが、当然ながら時間が足りない。そこで、`b_1`, `b_1 xor b_2`, `b_1 xor b_2 xor b_3`, …のそれぞれについて、取り得る値とそのパターン数を調べていくことを考える。$A$が$600,200,720$の場合を例にとって説明する。$\min(a_1,1000-a_1)=400$より、`b_1`としてあり得るのは$600$と$400$で各$1$通り。次に$\min(a_2,1000-a_2)=400$より、`b_1 xor b_2`としてあり得るのは$600\text{ xor }200=656$と$400\text{ xor }200=344$で各$1$通り。最後に$\min(a_3,1000-a_3)=280$より、`b_1 xor b_2 xor b_3`としてあり得るのは$656\text{ xor }720=64,\;344\text{ xor }720=904,\;656\text{ xor }280=904,\;344\text{ xor }280=64$なので、$64$が2通りと$904$が$2$通り。このように、第$k$項までのxorとしてあり得る値およびパターン数から第$(k+11)$項までのxorとしてあり得る値およびパターン数が求まる。パターン数の計算を$\mod10^9+7$で行うことに注意すると答えが出る。
